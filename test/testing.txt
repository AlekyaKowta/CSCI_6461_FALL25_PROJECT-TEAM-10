; New C6461 ISA Test Program

LOC 20                ; Begin at address 20

Data 7                ; A value to load (at 20)
Data 2                ; A multiplier (at 21)
Data Msg              ; Address of Msg (at 22)
Data 0                ; Unused (at 23)

LDR 0,0,20            ; R0 = MEM[20] (7)
LDR 1,0,21            ; R1 = MEM[21] (2)
MLT 0,1               ; R0:R1 = R0 * R1 (product of 7*2 = 14)
STR 0,0,23            ; MEM[23] = R0 (should store 14 at 23)
SMR 0,0,21            ; R0 = R0 - MEM[21] (14-2=12)
STX 1,22              ; X1 = 22 (address of Msg)
SRC 0,1,1,3           ; Shift R0 left 3 bits with count type 1, logical
IN 0,0                ; Read input to R0 (simulate device 0)
OUT 0,0               ; Output R0 to device 0
CHK 0,0               ; Check device 0 status, set CC
HLT                   ; End

LOC 100
Msg: Data 42          ; Output location
